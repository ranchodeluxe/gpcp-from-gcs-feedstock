pangeo-forge-runner bake \
   --repo=https://github.com/carbonplan/leap-pgf-example/ \
   -f /Users/ranchodeluxe/apps/leap-pgf-example/feedstock/runner_config.py \
   --Bake.job_name=agcd \
   --Bake.bakery_class="pangeo_forge_runner.bakery.flink.FlinkOperatorBakery"

# --FlinkOperatorBakery.beam_executor_resources='{"requests": {"cpu": 0.5, "memory": 2048}}' \
# --Bake.container_image='apache/beam_python3.9_sdk:2.50.0' \
# --FlinkOperatorBakery.flink_configuration='{"kubernetes.jobmanager.tolerations": "key:pangeo-forge-runner-jobs,operator:Equal,value:only,effect:NoSchedule", "kubernetes.taskmanager.tolerations": "key:pangeo-forge-runner-jobs,operator:Equal,value:only,effect:NoSchedule"}' \

pangeo-forge-runner bake \
    --repo=https://github.com/ranchodeluxe/gpcp-from-gcs-feedstock.git  \
    --ref="test/integration" \
    -f /Users/ranchodeluxe/apps/gpcp-from-gcs-feedstock/feedstock/runner_config.py \
    --FlinkOperatorBakery.job_manager_resources='{"memory": "1024m", "cpu": 1.0}' \
    --FlinkOperatorBakery.task_manager_resources='{"memory": "1024m", "cpu": 1.0}' \
    --FlinkOperatorBakery.flink_configuration='{"taskmanager.numberOfTaskSlots": "1"}' \
    --FlinkOperatorBakery.enable_job_archiving=True \
    --FlinkOperatorBakery.parallelism=1 \
    --FlinkOperatorBakery.flink_version="1.16" \
    --Bake.job_name=recipe \
    --Bake.prune=True \
    --Bake.container_image='apache/beam_python3.9_sdk:2.50.0' \
    --Bake.bakery_class="pangeo_forge_runner.bakery.flink.FlinkOperatorBakery"


pangeo-forge-runner bake \
    --repo=https://github.com/ranchodeluxe/staged-recipes.git \
    --ref="nclimgrid" \
    -f /Users/ranchodeluxe/apps/gpcp-from-gcs-feedstock/feedstock/runner_config.py \
    --FlinkOperatorBakery.job_manager_resources='{"memory": "6144m", "cpu": 1.0}' \
    --FlinkOperatorBakery.task_manager_resources='{"memory": "6144m", "cpu": 1.0}' \
    --FlinkOperatorBakery.flink_configuration='{"taskmanager.numberOfTaskSlots": "1", "taskmanager.memory.flink.size": "3072m", "taskmanager.memory.task.off-heap.size": "1024m", "taskmanager.memory.jvm-overhead.max": "4096m"}' \
    --FlinkOperatorBakery.parallelism=5 \
    --FlinkOperatorBakery.flink_version="1.16" \
    --Bake.container_image='apache/beam_python3.9_sdk:2.50.0' \
    --Bake.job_name=nclimgrid \
    --Bake.feedstock_subdir="recipes/noaa-nclimgrid" \
    --Bake.bakery_class="pangeo_forge_runner.bakery.flink.FlinkOperatorBakery"


pangeo-forge-runner bake \
    --repo=https://github.com/ranchodeluxe/gpcp-from-gcs-feedstock.git  \
    --ref="test/integration" \
    -f /Users/ranchodeluxe/apps/gpcp-from-gcs-feedstock/feedstock/runner_config.py \
    --FlinkOperatorBakery.job_manager_resources='{"memory": "6144m", "cpu": 1.0}' \
    --FlinkOperatorBakery.task_manager_resources='{"memory": "6144m", "cpu": 1.0}' \
    --FlinkOperatorBakery.flink_configuration='{"taskmanager.numberOfTaskSlots": "1", "taskmanager.memory.flink.size": "3072m", "taskmanager.memory.task.off-heap.size": "1024m", "taskmanager.memory.jvm-overhead.max": "4096m"}' \
    --FlinkOperatorBakery.parallelism=1 \
    --FlinkOperatorBakery.flink_version="1.16" \
    --Bake.container_image='apache/beam_python3.9_sdk:2.47.0' \
    --Bake.job_name=recipe \
    --Bake.bakery_class="pangeo_forge_runner.bakery.flink.FlinkOperatorBakery"


pangeo-forge-runner bake \
    --repo=https://github.com/ranchodeluxe/mursst-example \
    --ref="main" \
    -f /Users/ranchodeluxe/apps/gpcp-from-gcs-feedstock/feedstock/runner_config.py \
    --FlinkOperatorBakery.job_manager_resources='{"memory": "6144m", "cpu": 1.0}' \
    --FlinkOperatorBakery.task_manager_resources='{"memory": "6144m", "cpu": 1.0}' \
    --FlinkOperatorBakery.flink_configuration='{"taskmanager.numberOfTaskSlots": "1", "taskmanager.memory.jvm-overhead.max": "6144m"}' \
    --FlinkOperatorBakery.parallelism=1 \
    --FlinkOperatorBakery.flink_version="1.16" \
    --Bake.container_image='apache/beam_python3.9_sdk:2.50.0' \
    --Bake.job_name=mursst \
    --Bake.bakery_class="pangeo_forge_runner.bakery.flink.FlinkOperatorBakery" \
    --Bake.logging_config='{"version": 1, "disable_existing_loggers": True}'


pangeo-forge-runner bake \
    --repo=https://github.com/ranchodeluxe/leap-pgf-example \
    --ref="test/integration" \
    -f /Users/ranchodeluxe/apps/gpcp-from-gcs-feedstock/feedstock/runner_config.py \
    --FlinkOperatorBakery.job_manager_resources='{"memory": "6144m", "cpu": 1.0}' \
    --FlinkOperatorBakery.task_manager_resources='{"memory": "6144m", "cpu": 1.0}' \
    --FlinkOperatorBakery.flink_configuration='{"taskmanager.numberOfTaskSlots": "1", "taskmanager.memory.jvm-overhead.max": "6144m"}' \
    --FlinkOperatorBakery.parallelism=1 \
    --FlinkOperatorBakery.flink_version="1.16" \
    --Bake.container_image='apache/beam_python3.9_sdk:2.50.0' \
    --Bake.job_name=agcd \
    --Bake.prune=True \
    --Bake.bakery_class="pangeo_forge_runner.bakery.flink.FlinkOperatorBakery"


pangeo-forge-runner bake \
    --repo=https://github.com/ranchodeluxe/leap-pgf-example \
    --ref="test/monekypatch" \
    -f /Users/ranchodeluxe/apps/gpcp-from-gcs-feedstock/feedstock/runner_config.py \
    --Bake.job_name=agcd \
    --Bake.prune=True \
    --Bake.bakery_class="pangeo_forge_runner.bakery.local.LocalDirectBakery"